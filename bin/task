#!/usr/bin/env ruby

require_relative '../app.rb'

EARTH_RADIUS = 6371

task = Task.with(
  radius: EARTH_RADIUS,
  max_distance: 100,
  central_point: SpherePoint.with(latitude: 53.339428, longitude: -6.257664)
)

infile, outfile = ARGV
if infile.nil? || infile == "--help"
  puts "Please pass the input file path as the first argument."
  puts "You can optionally pass an output file as the second argument,"
  puts "if not, I'll just print out the results!"
  exit 1
end

result = task.call(infile)

outio = outfile ? File.open(outfile, 'w') : STDOUT
outio.write(result.join("\n"))
outio.close
